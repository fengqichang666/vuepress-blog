(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{297:function(t,r,a){"use strict";a.r(r);var e=a(10),n=Object(e.a)({},(function(){var t=this,r=t._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h2",{attrs:{id:"使用场景"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#使用场景"}},[t._v("#")]),t._v(" 使用场景")]),t._v(" "),r("p",[t._v("项目中的一个表单中，有两个下拉框，都选择之后需要发接口把所选信息上送，后端进行校验，看两个下拉框所选内容是否符合条件，如果不符合，后端返回标识，下拉框下方报错。")]),t._v(" "),r("h2",{attrs:{id:"方法一"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#方法一"}},[t._v("#")]),t._v(" 方法一")]),t._v(" "),r("p",[t._v("element-ui的form-item有一个error属性可以进行设置错误信息，在接口返回信息后，设置error信息")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v(' <el-form-item label="表单元素" prop="valid_num" :error="errorMsg">\n    <el-input v-model="ruleForm.valid_num"></el-input>\n  </el-form-item>\n')])])]),r("p",[t._v('设置验证码error="errorMsg"（errorMsg在data中定义）')]),t._v(" "),r("p",[t._v("在后台数据返回后进行")]),t._v(" "),r("p",[t._v("this.erroMsg = res.data.message")]),t._v(" "),r("h2",{attrs:{id:"方法二"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#方法二"}},[t._v("#")]),t._v(" 方法二")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v('\t这里使用async await；可根据个人喜好使用promise.then写法\n\tvar checkAge = async(rule, value, callback) => {\n        if (!value) {\n          return callback(new Error(\'年龄不能为空\'));\n        }\n        \n        let res = await this.query();\n        if(res){\n        \treturn callback(new Error(res));\n        }\n        callback()\n      };\n      \n      \n   methods: {\n   \t\tasync query(){\n   \t\t\tconst params = {\n   \t\t\t\t入参\n   \t\t\t}\n   \t\t\tlet res = await check(params)\n   \t\t\t……处理逻辑\n   \t\t\t//如果需要报错，return出根据返回值判断后，想要的报错\n   \t\t\treturn "报错了"\n   \t\t\t//校验成功return空字符串\n   \t\t\treturn ""\n   \t\t}\n   }\n')])])]),r("h2",{attrs:{id:"其他"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[t._v("#")]),t._v(" 其他")]),t._v(" "),r("p",[t._v("其他实现方式目前尚未探索")])])}),[],!1,null,null,null);r.default=n.exports}}]);